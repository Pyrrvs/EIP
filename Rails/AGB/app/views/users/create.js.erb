var $sign_up = $("#sign-up"), $field = null;
$sign_up.find(".field-error").html("");
$sign_up.find("#message").css("color", "black");
<% if (@user.errors.any?) %>
	<% if (@user.errors[:internal]) %>
		$sign_up.find("#message").css("color", "red").html("<%= h @user.errors[:internal] %>");
	<% else %>
		$sign_up.find("#message").css("color", "red").text("Fix the following error(s) !");
		$sign_up.find(".field").css("background-color", "rgba(0, 0, 0, 0)");
		<% @user.errors.each do |attribute, errors_array| %>
			<% attribute = attribute.to_s %>
	 		<% attribute << "_confirmation" if (errors_array.index("confirmation")) %>
			$field = $sign_up.find('.field #user_<%= j attribute %>').parent();
			$field.find(".field-error").append("<%= j errors_array %><br/>").hide().show("slow");
			$field.css("background-color", "rgba(220, 220, 220, 1)");
		<% end %>
	<% end %>
<% else %>
	$sign_up.find("#message").text("Congratulations ! You have been added to AGB as <%= @user.name %> !")
<% end %>
